<style lang="less">
  @font-face {
    font-family:syicon;
    src: url(data:font/truetype;charset=utf-8;base64,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) format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  .dj-icon{display:inline-block}
  .dj-icon:before{
    font-family:syicon!important;
    font-style:normal;
    font-weight:400;
    speak:none;
    display:inline-block;
    text-decoration:inherit;
    width:1em;text-align:center;
    font-variant:normal;text-transform:none;
    line-height:1em;
    -webkit-font-smoothing:antialiased
  }

  .dj-icon-craftVip:before {content: "\E005";}
  .dj-icon-agent:before {content: "\E002";}
  .dj-icon-craftVip:before {content: "\E005";}
  .dj-icon-door:before {content: "\E006";}
  .dj-icon-heart:before {content: "\E007";}
  .dj-icon-hearted:before {content: "\E008";}
  .dj-icon-like:before {content: "\E009";}
  .dj-icon-msg:before {content: "\E00A";}
  .dj-icon-plus:before {content: "\E00B";}
  .dj-icon-service:before {content: "\E00C";}
  .dj-icon-share:before {content: "\E00D";}
  .dj-icon-circle-empty:before {content: "\E00E";}

  .dj-icon-close:before {content: "\e624";}
  .dj-icon-circle-success:before {content: "\E011";}
  .dj-icon-dot:before {content: "\E014";}
  .dj-icon-circle-ok:before {content: "\e637";}
  .dj-icon-circle-fail:before {content: "\e64d";}
  .dj-icon-address:before {content: "\e76f";}
  .dj-icon-arrow:before {content: "\e62d";}
  .dj-icon-collection-cancel:before {content: "\e600";}
  .dj-icon-collection:before {content: "\e60e";}
/*.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
}*/
</style>

<script>
import wepy from 'wepy'
import 'wepy-async-function'

import { setStore } from 'wepy-redux'
import configStore from './store'

const store = configStore()
setStore(store)

export default class extends wepy.app {
  config = {
    pages: [
      'pages/share',
      'pages/question',
      'pages/home',
      'pages/list',
      'pages/index'
    ],
    window: {
      backgroundTextStyle: 'light',
      navigationBarBackgroundColor: '#fff',
      navigationBarTitleText: 'WeChat',
      navigationBarTextStyle: 'black'
    }
  }

  globalData = {
    userInfo: null
  }

  constructor () {
    super()
    this.use('requestfix')
  }

  onLaunch() {
    // this.testAsync()
    this.getUserInfo()
  }

  /* sleep (s) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('promise resolved')
      }, s * 1000)
    })
  }

  async testAsync () {
    const data = await this.sleep(3)
    console.log(data)
  } */

  getUserInfo(cb) {
    const that = this
    if (this.globalData.userInfo) {
      return this.globalData.userInfo
    }
    wepy.getUserInfo({
      success (res) {
        that.globalData.userInfo = res.userInfo
        cb && cb(res.userInfo)
      }
    })
  }
}
</script>
